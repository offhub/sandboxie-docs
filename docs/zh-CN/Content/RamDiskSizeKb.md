# 内存虚拟磁盘大小 (KB)

_RamDiskSizeKb_ 是 [Sandboxie.ini](SandboxieIni.md) 中的一个全局设置项（在 v1.11.0 / 5.66.0 版本中引入），用于指定为启用了 [UseRamDisk](UseRamDisk.md) 设置的沙盒创建的内存虚拟磁盘的大小。该设置以千字节（KB）为单位定义，并决定了可为内存虚拟磁盘分配的最大系统内存量。

## 用法

要设置 `RamDiskSizeKb`，请在 Sandboxie 配置文件的 `[GlobalSettings]` 部分下添加以下行：

```ini
[GlobalSettings]

# 2 GB 内存虚拟磁盘示例
RamDiskSizeKb=2097152
```

## SandMan 界面

可以通过以下步骤设置内存虚拟磁盘大小：

1. 在 SandMan 界面中打开 `全局设置` 窗口。
2. 导航到 `附加组件管理器` > `附加组件配置` 选项卡。
3. 启用 `启用内存虚拟磁盘创建` 设置，并为内存虚拟磁盘大小设置一个值。

    ![Ram Disk Creation](../Media/UseRamDisk3.png)

## 重要说明

- **单一内存虚拟磁盘**: 系统只会创建一个内存虚拟磁盘，供所有启用了 `UseRamDisk` 设置的沙盒共同使用。这意味着指定的内存虚拟磁盘大小将在所有使用内存虚拟磁盘的沙盒之间共享。
  
- **内存管理**: 确保指定的大小不超过可用的系统内存。为内存虚拟磁盘分配过多内存可能导致系统不稳定或妨碍其他应用程序正常运行。如果指定的大小超过可用内存，内存虚拟磁盘可能无法挂载，并且会记录错误。

- **易失性存储**: 内存虚拟磁盘是易失性的，意味着当内存虚拟磁盘被卸载或系统重启时，其中存储的所有数据都将丢失。它非常适合不需要数据持久化的临时操作。

- **配置要求**: 在为单个沙盒启用 `UseRamDisk` 之前，请确保已在全局设置中适当配置 `RamDiskSizeKb`。

- **盘符分配**: 内存虚拟磁盘的盘符可以使用 `RamDiskLetter` 设置进行分配。

## 性能考量

- **速度**: 与传统磁盘存储相比，内存虚拟磁盘提供明显更快的读写速度，使其适用于高性能应用和测试环境。

- **资源监控**: 使用内存虚拟磁盘时，请监控系统内存使用情况，以避免超出可用内存并导致系统性能问题。 

- **应用适用性**: 考虑为需要高速数据访问的应用程序使用内存虚拟磁盘，例如开发环境、测试框架或临时文件存储。

## 相关设置

- [UseRamDisk](UseRamDisk.md) - 为单个沙盒启用内存虚拟磁盘。
- [RamDiskLetter](RamDiskLetter.md) - 指定内存虚拟磁盘的盘符。

通过配置 `RamDiskSizeKb` 设置，用户可以优化其 Sandboxie 环境的性能，同时确保所有使用内存虚拟磁盘的沙盒都能高效利用内存。
